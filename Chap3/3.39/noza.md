# 問題 3.39
`(s (lambda () (* x x)))` から返される手続きは `(* x x)` の評価中だけロックを握り、値を返した直後に外側で `set!` が実行される。一方 `(s (lambda () (set! x (+ x 1))))` は読み出しから代入までを一つの直列化された手続きとして実行する。この違いにより、次のような実行順序が残る。

- `(* x x)` がロック中に 10 を二度読み、結果 100 を計算した後、`set!` を行う前に `(+ x 1)` がロックを取得して 10 を読み込み 11 を代入し、最後に `set!` が 100 を書き戻す → 最終値 100。
- `(* x x)` が 10 を読み終えて 100 を計算した直後に `(+ x 1)` がロックを取得して 10 を読み込み、`set!` 100 の後に 11 を書き込む → 最終値 11。
- `set!` 100 が完了した後で `(+ x 1)` が 100 を読み込み 101 を代入する → 最終値 101。
- `(+ x 1)` が最初に実行され 11 を代入した後で `(* x x)` が 11 を二度読み 121 を計算して書き戻す → 最終値 121。

`(* x x)` の評価が完全に直列化されたことで、途中で 10 と 11 を取り違えるパターンが消え、元の 5 通りのうち 110 だけが排除される。
